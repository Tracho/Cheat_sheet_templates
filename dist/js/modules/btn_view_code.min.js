import bnt_copy from"./bnt_copy.js";let data=null;async function loadJson(){let e=document.location.origin+"/json/json.json",t=parseInt(document.location.port),o=document.location.hostname;if(""===t||"localhost"!==o){let t=document.location.pathname.split("dist/")[0]+"dist/json/json.json";e=document.location.origin+t}try{const t=await fetch(e);if(!t.ok)throw new Error("Ошибка сети: "+t.statusText);return data=await t.json(),data}catch(e){console.error("Ошибка при загрузке JSON:",e)}}function listener_view_code(e){e.addEventListener("click",(function(){let t=e.dataset.directory.split(",").length<=1?e.dataset.directory:e.dataset.directory.split(","),o=e.dataset.d_key.split(",").length<=1?e.dataset.d_key:e.dataset.d_key.split(",");(async()=>{if(await loadJson(),Array.isArray(t)&&Array.isArray(o)){document.querySelectorAll("._create_form").forEach((e=>{e.innerHTML=""})),t.map(((e,t)=>{let n=e.trim(),a=o[t].trim(),c=Object.keys(data[n][a]),r=data[n][a];Render_form(c,r,n,a),console.log(c),console.log(r)}))}else{let e=Object.keys(data[t][o]),n=data[t][o];document.querySelectorAll("._create_form").forEach((e=>{e.innerHTML=""})),Render_form(e,n,t,o),console.group("Глобальная переменная data:"),console.log(data),console.groupEnd()}bnt_copy()})()}))}function Render_form(e,t,o,n){document.querySelectorAll("._create_form").forEach((a=>{a.insertAdjacentHTML("beforeend",`\n      <div class="mb-2">\n      <h5 class="mb-0">${o} > ${n}</h5>\n      </div>\n      `),e.map(((e,o)=>{let c=new String(t[e]);a.insertAdjacentHTML("beforeend",`\n      <div class="mb-3">\n        <label for="text_code_info_${n}_${n}_${e}_${o}" class="form-label">${e} cod: </label>\n        <div class="input-group">\n          <input type="text" id="text_code_info_${n}_${n}_${e}_${o}" class="form-control _input_view_code" data-input_view_code="${e}" placeholder="${e}...">\n          <button class="btn btn-outline-secondary d-flex align-items-center _bnt_copy" type="button" data-bnt_copy="${e}">Copy <ion-icon class="ms-2" name="copy"></ion-icon></button>\n        </div>\n      </div>  \n    `),document.querySelector(`#text_code_info_${n}_${n}_${e}_${o}`).value=c}))}))}function btn_view_code(){let e=document.querySelectorAll("._render_section ._mini_btn_view_code");e.length>0&&e.forEach((e=>{listener_view_code(e)})),document.querySelectorAll("._btn_view_code").forEach((e=>{listener_view_code(e)}))}loadJson(),(async()=>{await loadJson(),console.group("Глобальная переменная data:"),console.log(data),console.groupEnd()})();export default btn_view_code;