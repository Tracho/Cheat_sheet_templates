import log_group from"../../log_group.js";function Sliders_grid(){document.querySelectorAll(".container_sliders_grid").forEach((e=>{let t=e.querySelector(".btn_navi_left_grid"),r=e.querySelector(".btn_navi_right_grid"),a=e.querySelectorAll(".slide_grid"),i=e.querySelector(".create_navi_pagi_grid"),n=0,l=Number(e.dataset.timer),c=null,o=!1,s=Number(e.dataset.grid)||Number(1),v=()=>{a.forEach(((e,t)=>{if(t>=n&&t<n+s){e.setAttribute("active","");const r=t-n;e.style=`z-index: 1; transform: translateX(${100*r}%);`}else t>=n&&t<n+s||(t<=n-1&&t!==n?e.setAttribute("active_after",""):t>=n+1&&t!==n&&e.setAttribute("active_before",""))})),0===n?(a[a.length-1].setAttribute("active_after",""),a[a.length-1].removeAttribute("active_before","")):n===a.length-1&&(a[0].setAttribute("active_before",""),a[0].removeAttribute("active_after",""))};v(),a.forEach(((e,t)=>{let r=n===t?"active":"";i.insertAdjacentHTML("beforeend",`<button class="btn_navi_grid" ${r} data-number="${t}"></button>`)}));let u=e.querySelectorAll(".btn_navi_grid"),d=()=>{a.forEach((e=>{e.removeAttribute("active"),e.removeAttribute("active_after"),e.removeAttribute("active_before"),e.removeAttribute("style")})),v(),u.forEach((e=>{e.removeAttribute("active")})),u[n].setAttribute("active","")};u.forEach((e=>{e.addEventListener("click",(()=>{clearInterval(c),n=Number(e.dataset.number),d()}))}));function b(){o&&(null!==c&&clearInterval(c),c=setInterval((()=>{n=n<a.length-1?n+1:0,d()}),l))}new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(o=!0,b()):(o=!1,clearInterval(c))}))}),{threshold:.2}).observe(e),b(),e.addEventListener("mouseenter",(()=>{clearInterval(c)})),e.addEventListener("mouseleave",(()=>{b()})),t.addEventListener("click",(()=>{clearInterval(c),n=n>0?n-1:a.length-1,d()})),r.addEventListener("click",(()=>{clearInterval(c),n=n<a.length-1?n+1:0,d()}));let _=0,g=0;e.addEventListener("touchstart",(e=>{_=e.touches[0].clientX})),e.addEventListener("touchmove",(e=>{g=e.touches[0].clientX})),e.addEventListener("touchend",(()=>{let e=g-_;Math.abs(e)>50&&(clearInterval(c),n=e<0?n<a.length-1?n+1:0:n>0?n-1:a.length-1,d()),_=0,g=0,setTimeout((()=>{b()}),2*l)}))}))}export default Sliders_grid;