import log_group from"../../log_group.js";function Sliders_grid(){let e=document.querySelectorAll(".container_sliders_grid"),t=null;function r(){t&&t(),t=void e.forEach((e=>{let t=e.querySelector(".btn_navi_left_grid"),r=e.querySelector(".btn_navi_right_grid"),i=e.querySelectorAll(".slide_grid"),n=e.querySelector(".create_navi_pagi_grid"),a=0,d=Number(e.dataset.timer),l=null,o=!1,s=!e.hasAttribute("data-pagi")||e.dataset.pagi,u=!e.hasAttribute("data-mobpagi")||e.dataset.mobpagi;s=!(!0!==u&&window.innerWidth<768)&&s;let c=Number(e.dataset.grid)||Number(1),v=Number(e.dataset.step)||Number(1),b=!1===e.hasAttribute("data-oldgrid")?c:Number(e.dataset.oldgrid);function g(){let e=Math.round(Number(i.length)/v);for(let t=0;t<e;t++){let e=t*v,r=a===e?"active":"";n.insertAdjacentHTML("beforeend",`<button class="btn_navi_grid" ${r} data-number="${e}"></button>`)}}e.setAttribute("data-oldgrid",b),window.innerWidth<768?(c=window.innerWidth<768?1:c,e.dataset.grid=c,v=window.innerWidth<768?1:v):e.dataset.grid=!1===e.hasAttribute("data-oldgrid")?c:Number(e.dataset.oldgrid),n.innerHTML="",(1==s||window.innerWidth<768&&1==u)&&g();let h=e.querySelectorAll(".btn_navi_grid"),m=!1,_=()=>{i.forEach(((e,t)=>{h[t]&&!0===m&&h[t].removeAttribute("active"),e.removeAttribute("active"),e.removeAttribute("active_after"),e.removeAttribute("active_before"),e.removeAttribute("style"),t<=a-1&&t!==a?e.setAttribute("active_after",""):t>=a+c&&t!==a&&e.setAttribute("active_before","")}));for(let e=0;e<c;e++){const t=(a+e)%i.length,r=i[t];r.removeAttribute("active_after"),r.removeAttribute("active_before"),r.setAttribute("active",""),r.style=`z-index: 3; transform: translateX(${100*e}%);`}m=!0};_();let f=()=>{if(_(),console.log(a),console.log(a+c),console.log(i.length),1==s||window.innerWidth<768&&1==u){let e=Math.round(a/v)>=h.length?0:Math.round(a/v);h[e].setAttribute("active","")}};function A(){a=a>0?Math.round(a-v):i.length-1,a=a<0?0:a}function w(){a=a<i.length-1?Math.round(a+v):0,a=a>=i.length?0:a}function E(){o&&(null!==l&&clearInterval(l),l=setInterval((()=>{w(),f()}),d))}(1==s||window.innerWidth<768&&1==u)&&h.forEach((e=>{e.addEventListener("click",(()=>{clearInterval(l),a=Number(e.dataset.number),f()}))})),new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(o=!0,E()):(o=!1,clearInterval(l))}))}),{threshold:.2}).observe(e),e.addEventListener("mouseenter",(()=>{clearInterval(l)})),e.addEventListener("mouseleave",(()=>{E()})),t.addEventListener("click",(()=>{clearInterval(l),A(),f(a)})),r.addEventListener("click",(()=>{clearInterval(l),w(),f()})),E(),window.addEventListener("resize",(()=>{clearInterval(l),setTimeout((()=>{E()}),2*d)}));let L=0,I=0;e.addEventListener("touchstart",(e=>{L=e.touches[0].clientX})),e.addEventListener("touchmove",(e=>{I=e.touches[0].clientX})),e.addEventListener("touchend",(()=>{let e=I-L;Math.abs(e)>50&&(clearInterval(l),a=e<0?a<i.length-1?a+1:0:a>0?a-1:i.length-1,f()),L=0,I=0,setTimeout((()=>{E()}),2*d)}))}))}window.addEventListener("resize",r),r()}export default Sliders_grid;